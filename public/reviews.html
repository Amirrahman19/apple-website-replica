<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <title>SP IT</title>
  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <!-- Custom styles for this template -->
  <link href="css/modern-business.css" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css"
    integrity="sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ" crossorigin="anonymous">
  <!--Bootstrap core JavaScript-->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>

<script>
  // API url
  const baseUrl = "http://localhost:8081";
  const token = localStorage.getItem("token");
  const loggedInUserID = parseInt(localStorage.getItem("loggedInUserID"));
  $(document).ready(function () {

    var productID = 0;
    var productID = getParameterByName('id');
      console.log(productID);
    axios.get(`${baseUrl}/product/${productID}/reviews`)
      .then((response) => {
        console.log(response);
        var reviewHtml = "";
        const reviews = response.data;
        console.log("hi")
        reviewHtml = `<div class="container">
        <div class="mgb-40 padb-30 auto-invert line-b-4 align-center">
            <h4 class="font-cond-l fg-accent lts-md mgb-10" contenteditable="false">Not Yet Convinced?</h4>
            <h1 class="font-cond-b fg-text-d lts-md fs-300 fs-300-xs no-mg" contenteditable="false">Read Customer Reviews</h1>
            <ul class="hash-list cols-3 cols-1-xs pad-30-all align-center text-sm">`;
        reviews.forEach((review) => {
          reviewHtml += `
            <li>
              <img src="" class="wpx-100 img-round mgb-20" title="" alt="" data-edit="false" data-editor="field" data-field="src[Image Path]; title[Image Title]; alt[Image Alternate Text]">
              <p class="fs-110 font-cond-l" contenteditable="false">${review.review}</p>
              <h5 class="font-cond mgb-5 fg-text-d fs-130" contenteditable="false">${review.username}</h5>
              <small class="font-cond case-u lts-sm fs-80 fg-text-l" contenteditable="false">${review.productname}</small>
            </li>
                `;

        })

        reviewHtml += `</ul></div>`;
        $("#reviews").append(reviewHtml);
      });

    console.log("run")

    if (token === null || isNaN(loggedInUserID)) {
      loginhtml = `<a class='btn btn-dark' href="Login.html">Login</a>`;
      $("#loginout").append(loginhtml);
      $("#posts").empty();
    } else {

      console.log("Login!");

      

      if (productID != null) {
        $("#post-review").click(function () {
          const productid = productID
          const rating = $(".radio:checked").val();
          const review = $("#review").val();
          const requestBody = {
            userid: loggedInUserID,
            productid: productid,
            rating: rating,
            review: review
          };
          console.log(productid)
          axios.post(`${baseUrl}/user/${productid}/review/`, requestBody, { headers: { "Authorization": "Bearer " + token } })
            .then((response) => {
              $("#create-post-form-body").val("");

            });
        });
      }

    }
  });

  function getParameterByName(name, url = window.location.href) {
    name = name.replace(/[\[\]]/g, '\\$&');
    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
      results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
  }
</script>

<!-- <script>
  if (localStorage.getItem('loggedInUserID') === null) {
    $("#post-review").hide();
  }
</script> -->

<body>
  <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="index.html">SP IT!</a>
      <div class="collapse navbar-collapse justify-content-center" id="navbarResponsive">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="Promotion.html">Promotions</a>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="Category.html">Category</a>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="Products.html">Store</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="Profile.html">Profile</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="contact.html">Contact</a>
          </li>

        </ul>
      </div>

      <form class="d-flex">
        <input class="form-control mr-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-outline-success" type="submit">Search</button>
      </form>
    </div>
  </nav>
  <div class="py-5" style="margin-top:10px;background-color: white;color: white;padding-bottom: 0rem !important;">
    <div class="row justify-content-center">
      <ul class="list-inline">
        <li class="list-inline-item text-center">

          <!-- <label class="fas fa-mobile fa-2x"></label>
          <p><a href="#" id='products'>View all products</a> </p> -->


        </li>
      </ul>
    </div>
  </div>

  <div class="container" id='reviews'>

  </div>


  <!--    <div class="row text-center justify-content-center pt-5 cl-white">
        <div class="container-fluid mx-4">


          <h2 id="fh2">WE APPRECIATE YOUR REVIEW!</h2>
          <h6 id="fh6">Your review will help us to improve our web hosting quality products, and customer services.</h6>


          <form>

            <div class="form-group row">
              <label for="email" class="col-sm-3 col-form-label">ProductID:</label>
              <div class="col-sm-9">
                <input type="email" class="feedbackInfo" id="productid" placeholder="Productid" required>
              </div>
            </div>
            <div class="form-group row">
              <label for="fname" class="col-sm-3 col-form-label">Username:</label>
              <div class="col-sm-9">
                <input type="text" class="feedbackInfo" id="username" placeholder="Username" required>
              </div>
            </div>
            Rating 
  <br />
  <br />
  <label>Rate this website!
  </label>
  <fieldset class="selections" id='rating'>
    <label>Needs Work</label>
    <input type="radio" class="radio" name="pageRating" value="0">
    <input type="radio" class="radio" name="pageRating" value="1">
    <input type="radio" class="radio" name="pageRating" value="2">
    <input type="radio" class="radio" name="pageRating" value="3">
    <input type="radio" class="radio" name="pageRating" value="4">
    <input type="radio" class="radio" name="pageRating" value="5">
    <input type="radio" class="radio" name="pageRating" value="6">
    <input type="radio" class="radio" name="pageRating" value="7">
    <input type="radio" class="radio" name="pageRating" value="8">
    <input type="radio" class="radio" name="pageRating" value="9">
    <input type="radio" class="radio" name="pageRating" value="10">
    <label>Great</label>
  </fieldset>


  <label for="comment">
    Review:

  </label>
  <br>
  <textarea class="feedbackInfo comment" rows="5" maxlength="500" placeholder="Additional comments"
    id="review"></textarea>
  <div class="container">
    <a class="btn btn-primary btn-block" id="post-review" href="#">Submit</a>
  </div>


  </form>
  </div>
  </div>
-->

  <div class="container" id='posts'>
    <div class="row text-center justify-content-center pt-5 cl-white">
      <div class="container-fluid mx-4">


        <h2 id="fh2">WE APPRECIATE YOUR REVIEW!</h2>
        <h6 id="fh6">Your review will help us to improve our web hosting quality products, and customer services.</h6>


        <form>

          <!-- Rating -->
          <br />
          <br />
          <label>Rate this website!
          </label>
          <fieldset class="selections" id='rating'>
            <label>Needs Work</label>
            <input type="radio" class="radio" name="pageRating" value="0">
            <input type="radio" class="radio" name="pageRating" value="1">
            <input type="radio" class="radio" name="pageRating" value="2">
            <input type="radio" class="radio" name="pageRating" value="3">
            <input type="radio" class="radio" name="pageRating" value="4">
            <input type="radio" class="radio" name="pageRating" value="5">
            <input type="radio" class="radio" name="pageRating" value="6">
            <input type="radio" class="radio" name="pageRating" value="7">
            <input type="radio" class="radio" name="pageRating" value="8">
            <input type="radio" class="radio" name="pageRating" value="9">
            <input type="radio" class="radio" name="pageRating" value="10">
            <label>Great</label>
          </fieldset>


          <label for="comment">
            Write your reviews here:

          </label>
          <br>
          <textarea class="feedbackInfo comment" rows="5" maxlength="500" placeholder="Additional comments"
            id="review"></textarea>
          <div class="container">
            <a class="btn btn-primary btn-block" id="post-review" href="#">Submit</a>
          </div>


        </form>
      </div>
    </div>

  </div>
</body>

<!-- <div class="container">
  <div class="mgb-40 padb-30 auto-invert line-b-4 align-center">
      <h4 class="font-cond-l fg-accent lts-md mgb-10" contenteditable="false">Not Yet Convinced?</h4>
      <h1 class="font-cond-b fg-text-d lts-md fs-300 fs-300-xs no-mg" contenteditable="false">Read Customer Reviews</h1>
  </div>
  <ul class="hash-list cols-3 cols-1-xs pad-30-all align-center text-sm">
      <li>
        <img src="https://bootdey.com/img/Content/avatar/avatar1.png" class="wpx-100 img-round mgb-20" title="" alt="" data-edit="false" data-editor="field" data-field="src[Image Path]; title[Image Title]; alt[Image Alternate Text]">
        <p class="fs-110 font-cond-l" contenteditable="false">" Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae. "</p>
        <h5 class="font-cond mgb-5 fg-text-d fs-130" contenteditable="false">Martha Stewart</h5>
        <small class="font-cond case-u lts-sm fs-80 fg-text-l" contenteditable="false">Business Woman - New York</small>
      </li>
      <li>
        <img src="https://bootdey.com/img/Content/avatar/avatar4.png" class="wpx-100 img-round mgb-20" title="" alt="" data-edit="false" data-editor="field" data-field="src[Image Path]; title[Image Title]; alt[Image Alternate Text]">
        <p class="fs-110 font-cond-l" contenteditable="false">" Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae. "</p>
        <h5 class="font-cond mgb-5 fg-text-d fs-130" contenteditable="false">Ariana Menage</h5>
        <small class="font-cond case-u lts-sm fs-80 fg-text-l" contenteditable="false">Recording Artist - Los Angeles</small>
      </li>
      <li>
        <img src="https://bootdey.com/img/Content/avatar/avatar5.png" class="wpx-100 img-round mgb-20" title="" alt="" data-edit="false" data-editor="field" data-field="src[Image Path]; title[Image Title]; alt[Image Alternate Text]">
        <p class="fs-110 font-cond-l" contenteditable="false">" Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae. "</p>
        <h5 class="font-cond mgb-5 fg-text-d fs-130" contenteditable="false">Sean Carter</h5>
        <small class="font-cond case-u lts-sm fs-80 fg-text-l" contenteditable="false">Fund Manager - Chicago</small>
      </li>
    </ul>
</div> -->


<!-- <section id="testimonials">
      heading
      <div class="testimonial-heading">
        <span>Comments</span>
        <h4>Clients Says</h4>
      </div>
      testimonials-box-container
      <div class="testimonial-box-container">
      
        <div class="testimonial-box">
         
          <div class="box-top">
           
            <div class="profile">
             
              <div class="profile-img">
                <img src="https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png" />
              </div>
        
              <div class="name-user">
                <strong>Liam mendes</strong>
                <span>@liammendes</span>
              </div>
            </div>
           
            <div class="reviews">
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="far fa-star"></i>
          
            </div>
          </div>
          
          <div class="client-comment">
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem, quaerat quis? Provident
              temporibus architecto asperiores nobis maiores nisi a. Quae doloribus ipsum aliquam tenetur voluptates
              incidunt blanditiis sed atque cumque.</p>
          </div>
        </div>
        
        <div class="testimonial-box">
        
          <div class="box-top">
        
            <div class="profile">
             
              <div class="profile-img">
                <img src="https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png" />
              </div>
              >
              <div class="name-user">
                <strong>Noah Wood</strong>
                <span>@noahwood</span>
              </div>
            </div>
         
            <div class="reviews">
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
         
            </div>
          </div>
         
          <div class="client-comment">
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem, quaerat quis? Provident
              temporibus architecto asperiores nobis maiores nisi a. Quae doloribus ipsum aliquam tenetur voluptates
              incidunt blanditiis sed atque cumque.</p>
          </div>
        </div>
      
        <div class="testimonial-box">
        
          <div class="box-top">
          
            <div class="profile">
          
              <div class="profile-img">
                <img src="https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png" />
              </div>
             
              <div class="name-user">
                <strong>Oliver Queen</strong>
                <span>@oliverqueen</span>
              </div>
            </div>
         
            <div class="reviews">
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="far fa-star"></i>
            
            </div>
          </div>
         
          <div class="client-comment">
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem, quaerat quis? Provident
              temporibus architecto asperiores nobis maiores nisi a. Quae doloribus ipsum aliquam tenetur voluptates
              incidunt blanditiis sed atque cumque.</p>
          </div>
        </div>
       
        <div class="testimonial-box">
        
          <div class="box-top">
           
            <div class="profile">
           
              <div class="profile-img">
                <img src="https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png" />
              </div>
          
              <div class="name-user">
                <strong>Barry Allen</strong>
                <span>@barryallen</span>
              </div>
            </div>
           
            <div class="reviews">
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="far fa-star"></i>
            
            </div>
          </div>
    
          <div class="client-comment">
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem, quaerat quis? Provident
              temporibus architecto asperiores nobis maiores nisi a. Quae doloribus ipsum aliquam tenetur voluptates
              incidunt blanditiis sed atque cumque.</p>
          </div>
        </div>
      </div>
    </section> -->

<!-- <div class="container mt-5">
        <h2>Request Form</h2>
        <div class="mt-5">
            <form class="form-horizontal" action="#">
                <div class="form-group">
                    <label class="control-label col-sm-2" for="product">Product Name:</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="product" placeholder="Enter Product Name">
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-sm-2" for="pwd">User Name:</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="pwd" placeholder="Enter your name">
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-sm-2" for="pwd">Description:</label>
                    <div class="col-sm-10">
                        <textarea class="form-control" rows="5" cols="2"></textarea>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                        <button type="submit" class="btn btn-success">Submit</button>
                        <button type="reset" class="btn btn-danger">Cancel</button>
                    </div>
                </div>
            </form>
        </div>
    </div> -->
<!-- Footer -->
<!-- <footer>
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-sm-12"></div>
        <div class="col-sm-12 ">Hybrid app</div>
        <div class="col-md-2 col-md-offset-1">
          <ul>
            <li><a href="Hybrid-digitale.html" class="cl-dar">Hybrid app</a></li>
            <li>Twitter Clone</li>
            <li>WhatsApp clone</li>
            <li>Tinder Clone</li>
            <li>Instagram Clone</li>
            <li>Facebook clone</li>
          </ul>
        </div>
        <div class="col-sm-12">
          <a href="Native-digital.html" class="cl-dar">
            Native app
          </a>
        </div>
        <div class="col-md-2">
          <ul>
            <li>
              <a href="Native-digital.html" class="cl-dar">
                Native app
              </a>
            </li>
            <li>Snap chat</li>

          </ul>
        </div>


        <div class="col-sm-12">Customization</div>
        <div class="col-md-2">
          <ul>
            <li>
              <a href="customization.html" class="cl-dar">
                Customization
              </a>
            </li>
            <li>I have a request</li>
            <li>About Customization</li>

          </ul>
        </div>
        <div class="col-sm-12">My Account</div>

        <div class="col-md-2">
          <ul>
            <li>My Account</li>

            <li>Login</li>
            <li>Signup</li>
          </ul>
        </div>
        <div class="col-sm-12">About socodeur</div>
        <div class="col-md-2">
          <ul>
            <li>
              <a href="about.html" class="cl-dar">
                About socodeur
              </a>

            </li>
            <li>Mobile Applications</li>
            <li>Support Store</li>
            <li>Customization</li>
          </ul>
        </div>
        <div class="col-sm-12">Support</div>
        <div class="col-md-2">
          <ul>
            <li>Support</li>
            <li>Problem</li>
            <li>Contact Us</li>
          </ul>
        </div>
      </div>
    </div>
    <div class="container">

      <div class="row">
        <div class="footerWrap col">
          <p>More ways to shop: Visit an <a>Socodeur Store</a>, call 1-800-MY-Socodeur, or <a>find a reseller</a>.</p>

        </div>
        <div class="col text-right">
          <p>
            <a href="Languages.html">
              <img src="images/flags/usa.png" /><span class="cl-dar">&nbsp; United State</span>
            </a>
          </p>

        </div>
      </div>
      <hr />
      <div class="footerWrap col-md-10 col-md-offset-1">
        <div class="copyright col-md-4">
          <p>Copyright © 2017 Socodeur All rights reserved.</p>
        </div>
      </div>
    </div>
  </footer> -->




</html>